!function(){var t=$(".addQuestion"),n=$('button[data-dismiss="modal"]'),a=$('img[alt="add"]'),e=$('img[alt="edit"]'),o=$('img[alt="recycle"]'),r=$("#table2"),l=$("#table1"),i="/admin/",d=null,c=function(){l.empty(),runAjax("/admin/ques/",null).done(function(t){for(var n="<tr><th>#</th><th>Вопрос</th><th>Ответы</th><th>Правильный ответ (№)</th><th>Act.</th></tr>",a=0;a<=t.row.lenght;a++){n+="<tr><td>"+(a+1)+"</td><td>"+t.row.question+"</td><td>";for(var e=0;e<=t.row.ans.lenght;e++)n+="<p>"+(e+1)+" "+t.row.ans[e]+"</p>";n+="</td><td>"+t.row.right+'</td><td><img src="img/edit.png" alt="edit" data-id="1" data-toggle="modal" data-target="#myModal"><img src="img/trash.png" alt="recycle" data-id="1"></td></tr>',l.append(n)}}).fail(function(){l.append('<tr><td colspan="5">Вопросов пока нет..</td></tr>'),console.log("error")})},s=function(){$("#questionForm").on("submit",g),n.on("click",m),t.on("click",p),e.on("click",h),a.on("click",_addFormInput),o.on("click",u)};_addFormInput=function(){f(1)};var u=function(t){var n=$(t.target).attr("data-id");runAjax(i+"del/"+n,null).done(function(){c(),console.log("success")}).fail(function(){console.log("error")})},f=function(n){if(6===n)return t.attr("disabled","disabled"),!1;t.removeAttr("disabled");var a='<div class="form-group answer"><label>Ответ '+n+'<input type="text" name="answer'+n+'"\tclass="form-control" placeholder="Ответ на вопрос"></label></div>';$(".rowanswer").append(a),d=n+1},g=function(t){t.preventDefault();var n=$(this).serialize();runAjax("/admin/add/",n).done(function(){c(),console.log("success")}).fail(function(){console.log("error")})},m=function(){$("#questionForm").trigger("reset");$(".answer").remove()},p=function(t){f(d)},h=function(t){var n=$("#editModal"),a=$(".rowanswer"),e=n.find("textarea"),o=$('input[name="answerright"]'),r=$(t.target).attr("data-id");d=1,runAjax(i+"?edit="+r,null).done(function(t){e.value(t.question.textarea);for(var n=0;n<=t.answer.lenght;n++){d=n+1;var r='<div class="form-group answer"><label>Ответ '+(n+1)+'<input type="text" name="answer'+(n+1)+'"\tclass="form-control" placeholder="Ответ на вопрос"></label></div>';a.append(r).val(t.answer.value)}o.value(t.answer.number),console.log("success")}).fail(function(){console.log("error")})};(function(){runAjax("/admin/ans/",null).done(function(t){for(var n="<tr><th>#</th><th>ФИО</th><th>Правильных ответов</th></tr>",a=0;a<=t.row.lenght;a++)n+=(t.row.ans,"success"),r.append(n)}).fail(function(){r.append('<tr><td colspan="3">Ответов пока нет..</td></tr>'),console.log("error")})})(),c(),s()}();