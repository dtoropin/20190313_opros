!function(){var t=$(".addQuestion"),n=$('button[data-dismiss="modal"]'),o=$('img[alt="add"]'),e=$('img[alt="edit"]'),r=$('img[alt="recycle"]'),a=$("#table2"),l=$("#table1"),i="question.php",s=null,c=function(){l.empty(),runAjax("question.php?get=ques",null).done(function(t){for(var n="<tr><th>#</th><th>Вопрос</th><th>Ответы</th><th>Правильный ответ (№)</th><th>Act.</th></tr>",o=0;o<=t.row.lenght;o++){n+="<tr><td>"+(o+1)+"</td><td>"+t.row.question+"</td><td>";for(var e=0;e<=t.row.ans.lenght;e++)t.row.ans[e];t.row.right,l.append(n)}}).fail(function(){l.append('<tr><td colspan="5">Вопросов пока нет..</td></tr>'),console.log("error")})},u=function(){$("#questionForm").on("submit",p),n.on("click",h),t.on("click",g),e.on("click",v),o.on("click",_addFormInput),r.on("click",d)};_addFormInput=function(){f(1)};var d=function(t){var n=$(t.target).attr("data-id");runAjax(i+"?del="+n,null).done(function(){c(),console.log("success")}).fail(function(){console.log("error")})},f=function(n){if(6===n)return t.attr("disabled","disabled"),!1;t.removeAttr("disabled");var o='<div class="form-group answer"><label>Ответ '+n+'<input type="text" name="answer'+n+'"\tclass="form-control" placeholder="Ответ на вопрос"></label></div>';$(".rowanswer").append(o),s=n+1},p=function(t){t.preventDefault();var n=$(this).serialize();runAjax("question.php?add",n).done(function(){c(),console.log("success")}).fail(function(){console.log("error")})},h=function(){$("#questionForm").trigger("reset");$(".answer").remove()},g=function(t){f(s)},v=function(t){var n=$("#editModal"),o=$(".rowanswer"),e=n.find("textarea"),r=$('input[name="answerright"]'),a=$(t.target).attr("data-id");s=1,runAjax(i+"?edit="+a,null).done(function(t){e.value(t.question.textarea);for(var n=0;n<=t.answer.lenght;n++){s=n+1;var a='<div class="form-group answer"><label>Ответ '+(n+1)+'<input type="text" name="answer'+(n+1)+'"\tclass="form-control" placeholder="Ответ на вопрос"></label></div>';o.append(a).val(t.answer.value)}r.value(t.answer.number),console.log("success")}).fail(function(){console.log("error")})};(function(){runAjax("question.php?get=ans",null).done(function(t){for(var n="<tr><th>#</th><th>ФИО</th><th>Правильных ответов</th></tr>",o=0;o<=t.row.lenght;o++)n+=(t.row.ans,"success"),a.append(n)}).fail(function(){a.append('<tr><td colspan="3">Ответов пока нет..</td></tr>'),console.log("error")})})(),c(),u()}();