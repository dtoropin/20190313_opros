!function(){var t=$(".addAnswer"),n=$('button[data-dismiss="modal"]'),a=$(".tab-questions__add"),e=$(".modal__edit"),r=$("#tableAnswers"),o=$("#tableQuestions"),d="/admin/",i=null,l=function(){o.empty();runAjax("/admin/question/",null).done(function(t){o.append("<tr><th>#</th><th>Вопрос</th><th>Ответы</th><th>Правильный ответ (№)</th><th>Act.</th></tr>"),$.each(t.row,function(t,n){var a="<tr><td>"+(t+1)+"</td><td>"+n.questions+"</td><td>";$.each(n.answers.split(";"),function(t,n){a+="<p>"+(t+1)+" "+n+"</p>"}),a+="</td><td>"+n.right+'</td><td><img src="img/edit.png" class="modal__edit" alt="edit" data-id="'+n.id+'" data-toggle="modal" data-target="#questionModal"><img src="img/trash.png" class="modal__delete" alt="recycle" data-id="'+n.id+'"></td></tr>',o.append(a)})}).fail(function(){o.append('<tr><td colspan="5">Вопросов пока нет..</td></tr>')})},s=function(){$("#questionForm").on("submit",f),n.on("click",m),t.on("click",c),e.on("click",h),a.on("click",_addFormInput),$(".modal__delete").on("click",p)};_addFormInput=function(){u(1)};var c=function(t){t.preventDefault(),u(i)},u=function(n){if(6===n)return t.prop("disabled",!0),!1;t.prop("disabled",!1);var a='<div class="form-group answer"><label>Ответ '+n+'<input type="text" name="answer'+n+'"\tclass="form-control" placeholder="Ответ на вопрос"></label></div>';$(".rowanswer").append(a),i=n+1},p=function(t){console.log("delete");var n=$(t.target).attr("data-id"),a=d+"delete/"+n;console.log(n," ",a),runAjax(a,null).done(function(){l()}).fail(function(){console.log("error")})},f=function(t){t.preventDefault();var n=$(this).serialize();runAjax("/admin/add/",n).done(function(){l(),m(),$("#questionModal").modal("hide")}).fail(function(){console.log("error")})},m=function(){$("#questionForm").trigger("reset"),$(".answer").remove()},h=function(t){var n=$("#editModal"),a=$(".rowanswer"),e=n.find("textarea"),r=$('input[name="answerright"]'),o=$(t.target).attr("data-id");_number=1,runAjax(d+"?edit="+o,null).done(function(t){e.value(t.question.textarea);for(var n=0;n<=t.answer.lenght;n++){_number=n+1;var o='<div class="form-group answer"><label>Ответ '+(n+1)+'<input type="text" name="answer'+(n+1)+'"\tclass="form-control" placeholder="Ответ на вопрос"></label></div>';a.append(o).val(t.answer.value)}r.value(t.answer.number)}).fail(function(){console.log("error")})};(function(){runAjax("/admin/answer/",null).done(function(t){r.append("<tr><th>#</th><th>ФИО</th><th>Правильных ответов</th></tr>"),$.each(t.row,function(t,n){var a='<tr class="table-'+(n.right>=80?"success":"danger")+'"><td>'+(t+1)+'</td><td class="text-capitalize">'+n.surname+" "+n.name+"</td><td>"+n.right+"%</td></tr>";r.append(a)})}).fail(function(){r.append('<tr><td colspan="3">Ответов пока нет..</td></tr>')})})(),l(),s()}();