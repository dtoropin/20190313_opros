!function(){var n=$(".container"),o=$("#questions"),a=$(".answer-block"),e=$(".answer-block__right"),i=$(".answerForm__btn"),s=$(".answerForm__item-input"),r=[],t=function(){$("#answerForm").on("submit",u)},u=function(o){o.preventDefault();var t=0;$.each(r,function(n,o){var a=$('.questions__radio[name="question'+(n+1)+'"]:checked');$('.questions__radio[name="question'+(n+1)+'"][value='+o+"]").parent().css({color:"green",fontWeight:"bold"}),a.val()===o?t++:a.parent().css({color:"red",fontWeight:"bold"})}),$(".questions__radio").prop("disabled",!0);var u=t/r.length*100;$(".answerForm__right").val(u);var l=$(this).serialize();runAjax("/main/save/",l).done(function(){a.addClass(u>80?"bg-success":"bg-danger"),e.text(u+"%"),$("#successModal").modal("show"),i.prop("disabled",!0),s.prop("disabled",!0)}).fail(function(){n.html('<div class="alert alert-danger">Непредвиденный сбой сервера, попробуйте позже...</div>')})};(function(){runAjax("/main/get/",null).done(function(n){$.each(n.row,function(n,a){r.push(a.right);var e=a.questions,i=a.answers.split(";"),s='<div class="form-group jumbotron"><b>#'+(n+1)+"</b><p>"+e+"?</p>";$.each(i,function(o,a){s+='<div class="radio"><label><input type="radio" class="questions__radio" name="question'+(n+1)+'" value="'+(o+1)+'">'+a+"</label></div>"}),s+="</div>\x3c!-- .form-group jumbotron --\x3e",o.append(s)})}).fail(function(){o.append('<div class="form-group jumbotron">Вопросов пока не напечатали :(</div>'),i.prop("disabled",!0)})})(),t()}();