!function(){var n=$(".container"),a=$("#questions"),e=$(".answer-block"),r=$(".answer-block__right"),i=$(".answerForm__btn"),o=$(".answerForm__item-input"),s=[],t=function(){$("#answerForm").on("submit",c),$(".answerForm__checkFIO").on("click",l)},l=function(a){a.preventDefault();var e=$("#inputname"),r=$("#inputsurname");if(e.on("keyup",u),r.on("keyup",u),""===e.val())return e.addClass("is-invalid"),!1;if(""===r.val())return r.addClass("is-invalid"),!1;var i="name="+e.val()+"&surname="+r.val();runAjax("/main/check/",i).done(function(a){if(!a.count)return n.html('<div class="alert alert-danger">Вы уже проходили опрос...</div>'),!1;$(".answerForm__checkFIO").hide(),$(".answerForm__question").show(),d()}).fail(function(){return n.html('<div class="alert alert-danger">Непредвиденный сбой сервера, попробуйте позже...</div>'),!1})},u=function(n){$(n.target).removeClass("is-invalid")},d=function(){runAjax("/main/get/",null).done(function(n){$.each(n.row,function(n,e){s.push(e.right);var r=e.questions,i=e.answers.split(";"),o='<div class="form-group jumbotron"><b>#'+(n+1)+"</b><p>"+r+"?</p>";$.each(i,function(a,e){o+='<div class="radio"><label><input type="radio" class="questions__radio" name="question'+(n+1)+'" value="'+(a+1)+'">'+e+"</label></div>"}),o+="</div>\x3c!-- .form-group jumbotron --\x3e",a.append(o)}),i.prop("hidden",!1),$(".answerForm__head").prop("hidden",!1)}).fail(function(){a.append('<div class="form-group jumbotron">Вопросов пока не напечатали :(</div>'),i.prop("disabled",!0)})},c=function(a){a.preventDefault();var t=0;$.each(s,function(n,a){var e=$('.questions__radio[name="question'+(n+1)+'"]:checked');$('.questions__radio[name="question'+(n+1)+'"][value='+a+"]").parent().css({color:"green",fontWeight:"bold"}),e.val()===a?t++:e.parent().css({color:"red",fontWeight:"bold"})}),$(".questions__radio").prop("disabled",!0);var l=t/s.length*100;$(".answerForm__right").val(l);var u=$(this).serialize();runAjax("/main/save/",u).done(function(){e.addClass(l>80?"bg-success":"bg-danger"),r.text(l+"%"),$("#successModal").modal("show"),i.prop("disabled",!0),o.prop("disabled",!0)}).fail(function(){return n.html('<div class="alert alert-danger">Непредвиденный сбой сервера, попробуйте позже...</div>'),!1})};t()}();